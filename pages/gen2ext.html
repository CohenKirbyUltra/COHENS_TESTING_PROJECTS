<!DOCTYPE html>

<html>
    <center>
    <head>
        <title>gen 2 ext</title>
        <h1>Gen 2 Ext</h1>
        <p>generated scratch ext code or module scratch ext code converter</p>
    </head>

    <body>
        <label for="name">Extension Name</label>
        <input id="name" value="ExtNAME" />
        
        <br>

        <label for="id">Extension Id</label>
        <input id="id" value="ExtID" />

        <br>

        <label for="inputCode">Input</label>
        <input id="inputCode" type="text" placeholder="...Code"/>

        <br>

        <label for="resultCode">Result</label>
        <textarea id="resultCode" width="100%" height="1000px"></textarea>

        <script>
            var _name = document.getElementById("name").value;
            var _id = document.getElementById("id").value;

            var input = document.getElementById("inputCode");
            var output = document.getElementById("resultCode");
            
            input.addEventListener("input", () => {
                output.innerHTML = result(_name, _id, input.value);
            });
            
            function result(extName, extID, code) {
                let startExt = "(function (Scratch) { \n 'use strict' \n if (!Scratch.extensions.unsandboxed) throw new Error(`${extName} must be run unsandboxed`);";
                let endExt = "Scratch.extensions.register(new JgScriptsBlocks()); \n })(Scratch);";
                
                return startExt + "\n" + code + "\n\n" + endExt;
            }
        </script>
    </body>
    </center>
</html>